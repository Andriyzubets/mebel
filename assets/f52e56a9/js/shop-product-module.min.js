!function(a){"use strict";function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.min_quantity=null,this.max_quantity=null,this.quantityInput=null,this.incButton=null,this.decButton=null,this.addButton=null,this.removeButton=null,this.addedBlock=null,this.checked=!0,this.init()}var c="shopProductModule",d={onChange:null};a.extend(b.prototype,{init:function(){this.quantityInput=a(this.element).find("input.item-quantity"),this.incButton=a(this.element).find("button.increase-item-quantity"),this.decButton=a(this.element).find("button.decrease-item-quantity"),this.addButton=a(this.element).find(".add"),this.removeButton=a(this.element).find(".remove"),this.addedBlock=a(this.element).find(".added"),this.min_quantity=this.quantityInput.data("min-quantity"),this.max_quantity=this.quantityInput.data("max-quantity"),this.checked=a(this.element).data("default-selected"),this.addButton.hide(),this.onCountChange(),this.onCounterButtonsClick(),this.onAddButtonClick(),this.onRemoveButtonClick(),this.checked?(this.addedBlock.show(),this.addButton.hide()):(this.addedBlock.hide(),this.addButton.show())},onCounterButtonsClick:function(){var a=this;this.incButton.click(function(){var b=parseInt(a.quantityInput.val());b+1<=a.max_quantity&&a.quantityInput.val(b+1).change(),a.add()}),this.decButton.click(function(){var b=parseInt(a.quantityInput.val());b-1>=a.min_quantity?(a.quantityInput.val(b-1).change(),a[b-1<=0?"remove":"add"]()):a.remove()})},onCountChange:function(){var b=this;this.quantityInput.change(function(){var c=parseInt(a(this).val());c<b.min_quantity&&(c=b.min_quantity),c>b.max_quantity&&(c=b.max_quantity),isNaN(c)&&(c=b.min_quantity),a(this).val(c),b.changeEvent()})},onAddButtonClick:function(){var a=this;this.addButton.click(function(){var b=parseInt(a.quantityInput.val());b+1<=a.max_quantity&&a.quantityInput.val(b+1).change(),a.add()})},onRemoveButtonClick:function(){var a=this;this.removeButton.click(function(){a.quantityInput.val(a.min_quantity).change(),a.remove()})},add:function(){var b=this;this.checked||(this.checked=!0,a(this.element).addClass("enabled"),b.addButton.fadeOut(function(){b.addedBlock.fadeIn()}),b.changeEvent())},remove:function(){var b=this;this.checked&&(this.checked=!1,a(this.element).removeClass("enabled"),b.addedBlock.fadeOut(function(){b.addButton.fadeIn()}),b.changeEvent())},changeEvent:function(){"function"==typeof this.settings.onChange&&this.settings.onChange()},isEnabled:function(){return this.checked}}),a.fn[c]=function(d){var e;return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d)),"string"==typeof d&&(e=a.data(this,"plugin_"+c)[d]())}),void 0!==e?e:this}}(jQuery);